![1.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/93ab82ac-6896-49d7-a05e-338f2a42aa84/1.png)

## 🔸에러 핸들링 이해하기

- 앞서 배운것
    - 프로퍼티 래퍼
    - 배열, 딕셔너리 컬렉션 + **Set**
- 이번에 배울것
    - Swift를 이용한 에러 핸들링
    - **에러 타입(Error type)**
    - **스로잉 메서드(throwing method)** & **함수(function)**
    - guard와 defer 구문
    - do-catch 구문
    
    ---
    

## 🔸에러 핸들링 이해하기

- Swift 코드를 아무리 신중하게 설계하고 구현했다 해도 앱을 통제할 수 없는 상황은 언제든지 발생할 것이다.
    - 활성화된 인터넷 연결을 기반으로 동작하는 앱은 아이폰이 네트워크 신호를 잃는 것을 제어할 수 없다.
    - 사용자가 비행기 모드를 비활성화하는 것도 막을 수 없다.
- 앱이 해낼수 있는 것은 그러한 에러를 확실하게 처리하도록 구현하는 것이다.
    - 앱을 계속 사용하려면 활성화된 인터넷 연결이 필요한다는 것을 사용자가 알 수 있도록 메시지를 표시할 수 있다.
    
    ---
    
- Swift에서 에러를 처리하는데는 두가지 단계가 있다.
    - iOS 앱의 메서드 내에서 원하는 결과가 나오지 않을 경우에 에러를 발생(즉, 스로잉하기)
    - 메서드가 던진(throwing) 에러를 잡아서 처리하기
- 에러를 **던질** 경우, 해당 에러는 에러의 특성을 식별하여 취할 수 있는 가장 적절한 동작을 결정하는데 사용되는 특정 에러타입 중 하나가 될 것이다.
- 에러 타입 값을 Error 프로토콜을 따르는 모든 값이 될 수 있다.
- 앱 내의 메서드에서 에러를 던지도록 구현하는 것도 중요하지만, iOS SDK의 많은 API 메서드(특히, 파일 처리와 관련된 메서드)도 앱의 코드 내에서 처리되어야 할 에러를 던진다는 것도 알아두어야 한다.

---

## 🔸에러 타입 선언하기 struct?x class?x **enum!!**

- Ex, 원격 서버에 파일을 전송하는 메서드가 있다고 하자.
- 이 메서드는 여러 원인으로 인하여 파일 전송에 실패할 가능성이 있다.
    - 네트워크 연결이 없거나 너무 느림
    - 전송할 파일 차지 못함
- 이러한 모든 에러는 다음과 같이 Error 프로토콜을 따르는 열거형 내에서 표현되도록 할 수 있다.
- 아래와 같이 **에러타입**을 선언하면 에러가 발생했을 때 사용할 수 있다.
    
    ![4.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/5fe3588f-609b-479a-96a8-78bedfef2b5c/4.png)
    
    ---
    
    ## 🔸에러 던지기
    
    메서드나 함수가 에러를 던질 수 있따는 것을 선언할 때는 다음과 같이 **throws** 키워드를 이용한다.
    
    ![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/3fff62b6-b52f-453b-b8ba-5c5d8e6ffd4f/Untitled.png)
    
    **thorows** —> protocol 아님 **keyword** 임!!!!
    
- 결과를 반환하는 메서드나 함수의 경우, **throws** 키워드는 다음과 같이 반환 타입 앞에 위치하게 된다.
- 

![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/b38f583d-d13c-444f-bf34-304ebd36e0e1/Untitled.png)

---

## 🔸에러 던지기

- 에러를 던질 수 있도록 메서드를 선어했으니 오류가 발생할때 에러를 던지는 코드를 추가할 수 있다.
- 이것은 throw 구문과 guard 구문을 결합하여 사용하게 된다.
- 다음의 코드는 상태 값으로 제공되는 상수들을 선언한 다음, 메서드에 대한 guard 동작과 throw 동작을 구현하였다.
- 메서드 내에 있는 guard 구문은 각 조건이 **참**인지를 검사한다.
- 만약 거짓이라면 else 구문에 포함된 코드가 실행된다.
- 이 코드에서든 throw 구문을 사용하여 FileTransferError 열거형에 있는 에러값들 중 하나를 던지고 있다.

![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/b4301b56-04f5-43a2-909f-ceeb66667ec8/Untitled.png)

### **FileTransferError** —>오류 이름,  **case** 구문 —> 구체적 상황

---

## 🔸에러를 던지는 메서드와 함수 호출하기

- 메서드 또한 함수가 에러를 던지도록 선언했다면 일반적인 방법으로는 호출 할 수 없다.
- 이러한 메서드를 호출할 때는 다음과 같이 앞에 try 구문을 붙여야 한다.

![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/467f47bf-8370-46b4-b5ac-d4851864918f/Untitled.png)

- **try** 구문을 이용하는 방법 외에도 던져진 모든 에러를 잡아서 처리하는 **do-catch** 구문 내에서 호출하는 방법도 있다.
- Ex), filetTransfer 메서드를 sendFile 이라는 이름의 메서드 내에서 호출해야 한다고 가정해보자
- 이 경우에는 다음과 같이 구현할 수 있다.

![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/4f6e1440-7aef-4529-9659-cd4e06af68d3/Untitled.png)

- 이 메서드는 세가지 에러 조건에 대한 catch를 포함하고 있는 do-catch 구문 내에서 fileTrancsfer 메서드를 호출한다.
- 이 메서드는 여러 에러에 대하여 해당 에러에 대한 설명을 담고 있는 문자열 값을 반홚낟.
- 네번째 catch 절은 에러에 대한 패턴 매칭이 이뤄지지 않은 상태에 대한 것이다.
- 이것은 catch call 구문으로 앞선 catch 구문과 일치하지 않은 모든 에러를 처리할 수 있도록 해준다.
- 이것은 반드시 필요한데, do-catch 구문은 가능한 모든 에러에 대해 처리할 수 있도록 구성되어야 하기 때문이다.

---

## 🔸에러 객체에 접근하기

- 메서드 호출이 실패하면 반드시 실패한 원인을 구별할 수 있는 **NSError** 객체가 반환될 것이다.
- **catch** 구문에서 가장 필요한 것은 이 객체에 대해 접근하여 앱 코드 내에서 취할 수 있는 가장 적절한 동작을 실시하는 것이다.
- 다음 코드는 새로운 파일 시스템 디렉터리 생성하고자 할때 **catch** 구문 내에서 에러 객체에 접근하는 방법을 보여준다.

![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/90bf8d66-468c-4fc5-bb51-5faf236c629a/Untitled.png)

---

## 🔸에러 캐칭 비활성화하기

- 다음과 같이 **try!** 구문을 사용하면 **do-catch** 구문 내에서 메서드가 호출되도록 감싸지 않아도 스로잉 메서드가 강제로 실행된다.
- 이러한 방법을 사용하는 것은 컴파일러에게 이 메서드 호출은 어떠한 에러도 발생하지 않을 것이라고 알려주는 것과 동일하다.
- 이러한 방법을 사용했는데도 에러가 발생한다면 런타임 에러가 될 것이다.
- 그러므로 이러한 방법은 가급적 사용하지 않도록 하자.

![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/0d076c9b-191b-41c4-9ac4-9b20f61e4d90/Untitled.png)

---

## 🔸 defer 구문 사용하기

- 앞에서 구현한 sendFile 메서드는 에러를 처리하는 일반적인 시나리오를 보여준다.
- do-catch 구문에 있는 각각의 catch 절은 호출하는 메서드에게 제어권을 반환하기 위하여 return 구문을 포함하였다.
- 하지만, 에러의 종류와는 상관없이 제어권을 반환하기 전에 어떠한 별도의 작업을 수행하는 게 더 효과적인 경우가 있을 수 있다.
- Ex), sendFile 메서드에서는 제어권을 반환하기 전에 임시 파일들을 지워야 할 경우가 발생할 수 있다.
- 이것은 defer 구문을 이용하면 가능하다.

---

## 🔸 defer 구문 사용하기

- defer 구문은 메서드가 결과를 반환하기 직전에 실행되어야 하는 일련의 코드를 지정할 수 있게 해준다.
- 다음의 코드는 defer 구문이 포함되도록 sendFile 메서드를 수정한 것이다.
- 이제 defer 구문을 추가했으니 이 메서드가 어떠한 반환을 하든지 제어권을 반환하기 전에 removeTmpFiles 메서드와 closeConnection 메서드가 항상 호출될 것이다.

![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/18508e67-50cf-4d36-a38e-5c309fc028f9/Untitled.png)

---

## 🔸요약

에러 핸들링 이해하기

- 에러 핸들링은 강력하고 안정적인 iOS 앱을 만드는 가장 기본적인 파트다.
- Swift 2의 등장 덕분에 이제는 에러를 처리하는 작업이 훨씬 쉬워졌다.
- 에러 타입들은 Error 프로토콜을 따르는 값들을 이용하여 생성되며, 열거형처럼 구현되는 것이 가장 일반적이다.
- 에러를 던지는 메서드와 함수는 throw 키워드를 이용하명 선언된다.
- guard와 throw 구문은 에러타입을 기반으로 한 에러들을 던지기 위하여 메서드나 함수 코드 내에서 사용된다.
- 에러는 던질 수 있으나 메서드는 try 구문을 이용하여 호출되며, 반드시 do-catch 구문으로 감싸여야 한다.
- do-catch 구문은 철저하게 나열된 catch 패턴으로 구성되며, 각각의 catch 구문은 특징 에러에 실행될 코드를 담는다.
- 메서드가 반환될 때 실행될 정리 작업은 defer 구문을 이용하여 정의할 수 있다.

```swift
// 임의로 상황들을 만들어보는 예제
let connectionOK: Bool = true
let connectionSpeed: Double = 40.00
let fileFound: Bool = true
let fileSize: Int = 50

// Error 프로토콜을 따르는 나만의 에러 타입(열거형)
enum FileTransferError: Error {
    // 에러가 갖게 될 상황들을 값으로 정리함
    case noConnection
    case lowBandwidth
    case fileNotFound
    case tooBigSize
}

// 이 함수는 실행중에 오류가 발생할 수 있음
func transferFile() throws {
    // 함수 안에서는 최대한 모든 오류 상황들을 throw로 알려줄 수 있도록 만들어야 한다.
    
    // connectionOK가 false이면 else 구문 실행되고 함수 종료
    guard connectionOK else {
        throw FileTransferError.noConnection
    }
    
    guard connectionSpeed > 30 else {
        throw FileTransferError.lowBandwidth
    }
    
    guard fileFound else {
        throw FileTransferError.fileNotFound
    }
    
    guard fileSize < 20 else {
        throw FileTransferError.tooBigSize
    }
}

// transferFile 함수를 호출하는 응용 코드
// 파일 전송을 "시도"하고 결과를 문자열로 반환해서 안내함
func sendFile() -> String {
    // 오류가 발생할 수 있는 함수를 사용하는 쪽에서는 모든 오류 내용에 대응을 못하더라도 최대한 많이 대응 가능하도록 해줄 필요가 있다.
    
    do {
        try transferFile()
    } catch FileTransferError.noConnection {
        return "No Network Connection"
    } catch FileTransferError.lowBandwidth {
        return "File Transfer Speed too low"
    } catch FileTransferError.fileNotFound {
        return "File not Found"
    } catch let error {
        // 아직 챙기지 못한 오류상황 확인용 함수 내부 출력
        print("error: \(error)")
        return "Unknown error"
    }
    
    return "Successful transfer"
}

print("\(sendFile())")
```

---

![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/33558f77-984e-4715-8d43-430895b2c801/Untitled.png)

## 🔸타입

**Int, Float, Double, Bool, String** 

**Array,Dictionary**

**Class, Struct**

- Swift의 타입은 세가지 기본 그룹으로 구분되는데, **구조체, 열거형, 클래스** 이다.
- Swift의 구조체나 열거형은 대다수 언어보다 더 현저하게 강력하다.

-프로퍼티, 이니셜라이저, 메서드 지원뿐만 아니라 확장하거나 프로토콜을 따를 수 있다.

![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/f0a9411e-58cd-415a-bac2-7a7882d28855/Untitled.png)

---

## 🔸각 진수에 따라 정수를 표현하는 방법

![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/419d2761-be44-4028-af03-c2c2f31bb41c/Untitled.png)

---

## 🔸정수와 부동소수점 변환

![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/d8bf9abf-eabf-464f-83ff-7ce6a988dff4/Untitled.png)

---

## 🔸정수와 부동소수점 변환

![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/0fbaa939-c409-4ee0-a343-f6614b29299e/Untitled.png)

---

## 🔸문자열

![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/c47e41f6-3170-4d11-ba79-aa62512de20d/Untitled.png)

---

## 🔸문자열

![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/f0c189f6-df95-4288-9c51-4ca48fb88703/Untitled.png)

---

![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/98e5998c-2560-4f22-baa9-ea0fd2606076/Untitled.png)

---

![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/04c7de7a-e45a-4303-a722-0e1a96d6c0ee/Untitled.png)

---

![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/7e3ffba5-e5f7-4592-86b8-55d313cbf342/Untitled.png)

---

![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/258f3f5f-f793-48f2-ba9a-e301cb842563/Untitled.png)

---

![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/54de6f78-4c13-4563-98e6-22b945bd7c5f/Untitled.png)

---

![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/05089b6a-f634-4c5b-a4bc-69341d2dfec2/Untitled.png)

---

![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/479c88fb-ff00-4372-897c-a47cb545e9c0/Untitled.png)

---

![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/2def1438-bea1-40f0-a94f-e05e8df20ad7/Untitled.png)

---

![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/a4fce879-4652-48c8-952d-98a89cea6665/Untitled.png)

---

![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/f49afbb6-a8d5-4e8e-a5e0-2a6c64c61b9d/Untitled.png)

---

![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/b606d4d9-f247-4d38-b8d2-bf284e0354e0/Untitled.png)

---

![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/71053aa9-abe0-4a41-a50b-1f6eb47106f2/Untitled.png)

---

![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/40740c85-bb14-45e9-a8de-730a1048ae7e/Untitled.png)

자동으로 =1 , =2

---

## 🔸프로퍼티

class, Struct , enum

**저장, 연산(get, set)** 

## 🔸타입

**프로퍼티 관찰자(Property observers)**

프로퍼티 관찰자는 프로퍼티의 값이 변경되는지 관찰하고 응답한다.

프로퍼티 관찰자는 프로퍼티의 현재 값이 새로운 값과 같더라도 프로퍼티의 값이 설정될 때 호출된다.

아래의 위치에 프로퍼티 관찰자를 추가할 수 있다.

- 상속된 프로퍼티의 경우 하위클래스의 프로퍼티를 재정의하여 프로퍼티 관찰자를 추가한다.
- 정의한 계산된 프로퍼티의 경우 관찰자를 생성하는 대신에 프로퍼티의 setter를 이용하여 값 변경을 관찰하고 응답한다.

![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/413b96b8-bdbd-444d-9ef8-abce51c2902e/Untitled.png)

---

프로퍼티에 관찰자를 정의하는 방법은 2가지 선택사항을 가지며 둘다 정의할 수 도 있다.

![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/ea96862a-b312-472f-9222-96b89030bb3b/Untitled.png)

willSet 관찰자를 구현한다면 상수 파라미터로 새로운 프롶터ㅣ 값이 전달된다.

- willSet 구현의 일부로 이 파라미터에 특정 이름을 가질 수 있다.
- 파라미터 명과 구현내에 소괄호를 작성하지 않으면 파라미터는 newValue의 기본 파라미터 명으로 만들어 질 수 있다.

유사하게 didSet 관찰자를 구현한다면 예전 프로퍼티 값을 포함한 상수 파라미터가 전달된다.

- 파라미터 명을 사용하거나 oldValue 인 기본 파라미터 명을 사용할 수 있다.
- didSet 관찰자 내의 프로퍼티에 값을 할당한다면 새로운 값으로 방금 설정한 값을 대체한다.

---

![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/054a090d-cdf2-4329-b030-b3fbe825d726/Untitled.png)

---

## 🔸제너릭

**generic**

제너릭 코드는 정의한 요구사항에 따라 모든타입에서 동작할 수 잇는 유연하고 재사용 가능한 함수와 타입을 작성할 수 있다.

중복을 피하고 명확하고 추상적인 방식으로 의도를 표현하는 코드를 작성할 수 있다.

제너릭은 Swift의 강력한 특징 중 하나이고 Swift 표준 라이브러리 대부분은 제너릭 코드로 되어 있다.

사실 모르고 있더라도 Language Guide 전체에서 제너릭을 사용한다.

- Ex),  Swift의 Arr, Dict 타입은 둘다 제너릭 콜렉션이다.
- Int 값을 가진 배열, 또는 String  값을 가진 배열 || 실제로 Swift에서 생성될 수 있는 다른 모든 타입에 대한 배열을 생성할 수 있다.
- 마찬가지로 모든 지정된 타입의 값을 저장하기 위한 딕셔너리를 생성 할 수 있고 해당 타입에 대한 제한은 없다.

---

## 🔸제너릭이 해결하는 문제

다음의 두 Int 값을 바꾸는 swapTwoInt(: :) 라는 제너릭이 아닌 함수를 보자

이 함수는 In-Out 파라미터에서 설명한 대로 a, b의 값을 바꾸기 위해 in-out 파라미터를 사용하여 만든다.

swapTwoInts(: :)함수는 b의 값을 a로 그리고 a의 값을 b로 바꾼다.

2개의 Int 변수의 값을 바꾸기 위해 이 함수를 호출할 수 있다.

![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/37319568-5afb-4c91-bf8c-549509859146/Untitled.png)

---

![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/ff9c8d4a-cc60-488b-aa60-d2dc35cc94ff/Untitled.png)

---

![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/b578aecb-bf7a-4c7b-be6c-02cc6d616085/Untitled.png)

**T는 generic 함수다 타입은 T로 부른다.**

---

![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/88decd50-df7b-4c05-ae7c-17d65d658f5c/Untitled.png)

---

![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/6e27e2d0-01f1-4392-af3a-ea95e36b0ed6/Untitled.png)

---

![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/f2d7bcab-5ee3-45ec-8217-a77c74b93852/Untitled.png)

---

## 🔸타입 파라미터

![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/4b652173-d72e-46a4-a726-4f811abaad41/Untitled.png)

---

## 🔸타입 파라미터 이름

![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/7951d60c-8f4c-4033-aaa0-e93f9b3225a0/Untitled.png)

---

![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/76dc968d-c219-4f50-b41f-a027a726dc52/Untitled.png)

---

![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/2a9d4653-a6ea-43e5-ae71-19b2ce277af5/Untitled.png)

---

![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/51a9811a-ac1e-409e-9d3d-e86e435f6537/Untitled.png)

---

![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/94e2a1b1-4c61-4a90-97a0-c2ef5a1f2c65/Untitled.png)

---

![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/3c20fb77-4135-476a-a1b2-f0c3339759b4/Untitled.png)

---

![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/97f8168b-b4c4-4442-ae3c-14586847a2c3/Untitled.png)

---

![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/be5403b8-d576-4272-966f-21765b3bf438/Untitled.png)

---

![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/b4f5eb78-f108-438b-a11a-06b36aeaa83e/Untitled.png)

---

![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/00c59d90-00c1-4b9a-9c9d-159461e62340/Untitled.png)

---

![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/3d94e868-76c5-4600-91e9-dfd380c39a4c/Untitled.png)

---

![24.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/dfe86f3f-cc72-4468-a1cd-7387eeb455bc/24.png)

---

![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/9ce64748-8ce2-4969-8af9-9e04ae37d77e/Untitled.png)

---

![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/1e484e41-a826-4400-b459-f8be9283b829/Untitled.png)

---

![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/80ea6f90-6363-4650-9947-76b5d8e9fa0a/Untitled.png)

---

![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/4b809380-c76c-40e7-a728-daa0abc244e7/Untitled.png)

---
